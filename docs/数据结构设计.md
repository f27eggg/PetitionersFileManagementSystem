# 数据结构设计文档

## 概述

本文档详细描述上访人员档案管理系统的数据结构设计，包含所有字段的定义、数据类型、约束条件及说明。

## 数据模块划分

根据Excel模板分析，上访人员档案数据分为以下四大模块：

```
上访人档案
├── 个人信息（PersonalInfo）      - 19个字段
├── 在京关系人（BeijingContact）  - 5个字段
├── 信访案件（PetitionCase）      - 7个字段
└── 评估结果（RiskAssessment）    - 2个字段
```

---

## 一、个人信息模块（PersonalInfo）

### 1.1 基本身份信息

| 序号 | 字段名 | 字段标识 | 数据类型 | 是否必填 | 说明 |
|------|--------|----------|----------|----------|------|
| 1 | 姓名 | name | 字符串 | 是 | 上访人员真实姓名 |
| 2 | 身份证号 | idCard | 字符串(18位) | 是 | 18位身份证号码，唯一标识 |
| 3 | 性别 | gender | 枚举 | 是 | 男/女 |
| 4 | 籍贯 | nativePlace | 字符串 | 否 | 民族/籍贯信息（如：汉族） |
| 5 | 学历 | education | 枚举 | 否 | 小学/初中/高中/中专/大专/本科/硕士/博士/其他 |
| 6 | 曾用名 | formerName | 字符串 | 否 | 历史使用过的姓名 |
| 7 | 婚姻状态 | maritalStatus | 枚举 | 否 | 未婚/已婚/离异/丧偶 |
| 8 | 配偶 | spouse | 字符串 | 否 | 配偶姓名 |

### 1.2 联系方式

| 序号 | 字段名 | 字段标识 | 数据类型 | 是否必填 | 说明 |
|------|--------|----------|----------|----------|------|
| 9 | 联系方式1 | phone1 | 字符串 | 是 | 主要联系电话 |
| 10 | 联系方式2 | phone2 | 字符串 | 否 | 备用联系电话 |
| 11 | 联系方式3 | phone3 | 字符串 | 否 | 其他联系方式 |

### 1.3 职业与住址

| 序号 | 字段名 | 字段标识 | 数据类型 | 是否必填 | 说明 |
|------|--------|----------|----------|----------|------|
| 12 | 职业/收入来源 | occupation | 字符串 | 否 | 当前职业或主要收入来源 |
| 13 | 工作地址 | workAddress | 字符串 | 否 | 工作单位地址 |
| 14 | 常住地址 | homeAddress | 字符串 | 否 | 日常居住地址 |

### 1.4 上访相关信息

| 序号 | 字段名 | 字段标识 | 数据类型 | 是否必填 | 说明 |
|------|--------|----------|----------|----------|------|
| 15 | 赴京上访次数 | visitCount | 整数 | 否 | 累计进京上访的次数 |
| 16 | 是否懂技侦手段 | knowsTechMeasures | 布尔 | 否 | 是否了解反侦察技术 |
| 17 | 具体反侦察手段 | counterMeasures | 字符串 | 否 | 具体掌握的反侦察方法描述 |
| 18 | 描述 | description | 长文本 | 否 | 其他需要记录的描述信息 |
| 19 | 消费住宿习惯 | consumptionHabits | 字符串 | 否 | 在京期间的消费和住宿习惯 |

---

## 二、在京关系人模块（BeijingContact）

记录上访人员在北京的社会关系人信息，用于追踪可能的协助网络。

| 序号 | 字段名 | 字段标识 | 数据类型 | 是否必填 | 说明 |
|------|--------|----------|----------|----------|------|
| 1 | 姓名 | contactName | 字符串 | 否 | 在京关系人姓名 |
| 2 | 曾驻地 | formerAddress | 字符串 | 否 | 关系人曾经的居住地址 |
| 3 | 身份证号 | contactIdCard | 字符串(18位) | 否 | 关系人身份证号码 |
| 4 | 与信访人关系 | relationship | 字符串 | 否 | 与上访人的关系（亲属/朋友/同乡等） |
| 5 | 协助描述 | assistDescription | 长文本 | 否 | 提供的协助内容说明 |

---

## 三、信访案件模块（PetitionCase）

记录上访人员的诉求及上访行为相关信息。

| 序号 | 字段名 | 字段标识 | 数据类型 | 是否必填 | 说明 |
|------|--------|----------|----------|----------|------|
| 1 | 诉求描述 | petitionContent | 长文本 | 否 | 上访的具体诉求内容 |
| 2 | 是否能解决 | canResolve | 枚举 | 否 | 是/否/部分可以 |
| 3 | 解决方式 | resolutionMethod | 字符串 | 否 | 预计或已采取的解决方式 |
| 4 | 信访人上访轨迹 | visitTrajectory | 长文本 | 否 | 历次上访的时间地点记录 |
| 5 | 进京方式 | entryMethod | 枚举 | 否 | 自驾车/火车/飞机/长途汽车/其他 |
| 6 | 在京通行方式 | transportInBeijing | 枚举 | 否 | 地铁/公交/出租车/网约车/步行/其他 |
| 7 | 有无接应人 | hasReception | 枚举 | 否 | 有/无/不详 |

---

## 四、评估结果模块（RiskAssessment）

对上访人员的综合风险评估结果。

| 序号 | 字段名 | 字段标识 | 数据类型 | 是否必填 | 说明 |
|------|--------|----------|----------|----------|------|
| 1 | 统计分值 | riskScore | 整数 | 否 | 根据各项指标计算的综合风险分值 |
| 2 | 危险等级 | riskLevel | 枚举 | 否 | 低危/中危/高危/极高危 |

---

## 五、数据关系说明

### 5.1 主键设计

- **唯一标识**：以"身份证号"（idCard）作为上访人员的唯一标识
- **数据ID**：系统内部生成UUID作为记录的技术主键

### 5.2 一对多关系

- 一个上访人可对应多条上访记录（未来扩展）
- 一个上访人可对应多个在京关系人（当前版本简化为单条记录）

### 5.3 枚举值定义

#### 性别（Gender）
```
男、女
```

#### 学历（Education）
```
小学、初中、高中、中专、大专、本科、硕士、博士、其他
```

#### 婚姻状态（MaritalStatus）
```
未婚、已婚、离异、丧偶
```

#### 进京方式（EntryMethod）
```
自驾车、火车、高铁、飞机、长途汽车、其他
```

#### 在京通行方式（TransportMethod）
```
地铁、公交、出租车、网约车、步行、自驾、其他
```

#### 危险等级（RiskLevel）
```
低危、中危、高危、极高危
```

---

## 六、数据存储格式（JSON示例）

```json
{
  "id": "uuid-xxxx-xxxx",
  "createTime": "2025-11-22T10:30:00",
  "updateTime": "2025-11-22T10:30:00",
  "personalInfo": {
    "name": "张三",
    "idCard": "110101199001011234",
    "gender": "男",
    "nativePlace": "汉族",
    "education": "本科",
    "phone1": "13800138000",
    "phone2": "",
    "phone3": "",
    "maritalStatus": "未婚",
    "formerName": "",
    "occupation": "无业",
    "workAddress": "",
    "spouse": "",
    "visitCount": 3,
    "knowsTechMeasures": true,
    "counterMeasures": "频繁更换手机号码",
    "description": "",
    "consumptionHabits": "",
    "homeAddress": "北京市海淀区xxx"
  },
  "beijingContact": {
    "contactName": "",
    "formerAddress": "",
    "contactIdCard": "",
    "relationship": "",
    "assistDescription": ""
  },
  "petitionCase": {
    "petitionContent": "土地纠纷问题",
    "canResolve": "否",
    "resolutionMethod": "",
    "visitTrajectory": "",
    "entryMethod": "自驾车",
    "transportInBeijing": "地铁",
    "hasReception": "无"
  },
  "riskAssessment": {
    "riskScore": 17,
    "riskLevel": "中危"
  }
}
```

---

## 七、字段验证规则

| 字段 | 验证规则 |
|------|----------|
| 身份证号 | 18位，符合身份证校验规则 |
| 联系方式 | 11位手机号或固话格式 |
| 赴京上访次数 | 非负整数 |
| 统计分值 | 非负整数 |

---

*文档版本：v1.0*
*创建日期：2025年11月*
