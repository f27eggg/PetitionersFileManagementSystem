# 部署说明文档

**系统名称**：上访人员重点监控信息管理系统
**版本**：v1.0.0
**开发单位**：济南市公安局历下分局刑侦大队
**文档日期**：2025年11月24日

---

## 一、打包文件说明

### 1.1 JAR文件

项目打包后会在 `target/` 目录生成以下文件：

| 文件名 | 大小 | 说明 |
|--------|------|------|
| `petitioners-system-1.0.0.jar` | 148KB | 仅包含项目代码的原始JAR |
| `petitioners-system-1.0.0-shaded.jar` | 34MB | 包含所有依赖的完整JAR |

### 1.2 推荐使用

- **开发环境**：使用Maven运行 `mvn javafx:run`
- **生产环境**：使用Windows安装程序（MSI格式，后续生成）

---

## 二、打包命令

### 2.1 生成JAR文件

```bash
# 清理并打包（跳过测试）
mvn clean package -DskipTests

# 完整构建（包含测试）
mvn clean package
```

**输出位置**：`target/petitioners-system-1.0.0-shaded.jar`

### 2.2 生成Windows安装程序

```bash
# 先打包JAR
mvn clean package -DskipTests

# 使用jpackage生成MSI安装程序
mvn jpackage:jpackage
```

**输出位置**：`target/installer/PetitionersSystem-1.0.0.msi`

---

## 三、运行方式

### 3.1 开发环境运行

```bash
# 使用Maven运行
mvn javafx:run

# 或使用完整路径
"D:\Program Files\Apache-maven-3.6.3\apache-maven-3.6.3\bin\mvn" -f "项目路径\pom.xml" javafx:run
```

### 3.2 使用批处理脚本运行

**前提条件**：
1. 安装JDK 17或更高版本
2. 安装JavaFX SDK 17.0.2
3. 设置环境变量 `JAVAFX_HOME` 指向JavaFX SDK路径

**运行步骤**：
1. 双击项目根目录的 `run.bat`
2. 脚本会自动加载JavaFX模块并启动应用

### 3.3 使用安装程序（推荐）

**优点**：
- 无需配置Java环境
- 自带JRE运行时
- 开始菜单快捷方式
- 标准Windows卸载

**安装步骤**：
1. 运行 `PetitionersSystem-1.0.0.msi`
2. 按提示完成安装
3. 从开始菜单启动应用

---

## 四、系统要求

### 4.1 运行环境

| 项目 | 要求 |
|------|------|
| 操作系统 | Windows 10/11 (64位) |
| JDK版本 | 17 或更高版本 |
| JavaFX | 17.0.2 |
| 内存 | 最低2GB，推荐4GB |
| 磁盘空间 | 至少200MB可用空间 |

### 4.2 开发环境

| 工具 | 版本 |
|------|------|
| JDK | 17.0.12 |
| Maven | 3.6.3+ |
| JavaFX | 17.0.2 |

---

## 五、配置说明

### 5.1 pom.xml配置

**Maven Shade Plugin**：
- 主类：`com.petition.MainApp`
- 包含所有依赖
- 排除签名文件（.SF/.DSA/.RSA）

**JPackage Plugin**：
- 应用名称：`PetitionersSystem`
- 安装类型：MSI（Windows）
- 创建开始菜单快捷方式
- 允许用户选择安装路径

### 5.2 应用元数据

```xml
<groupId>com.petition</groupId>
<artifactId>petitioners-system</artifactId>
<version>1.0.0</version>
<name>上访人员重点监控信息管理系统</name>
<description>济南市公安局历下分局刑侦大队 - 上访人员重点监控信息管理系统</description>
```

---

## 六、数据文件说明

### 6.1 数据存储位置

- **数据文件**：`data/petitioners.json`
- **备份文件**：`data/backups/petitioners_backup_YYYYMMDD_HHMMSS.json`
- **配置文件**：`config/app-config.properties`（可选）

### 6.2 数据迁移

**导出数据**：
1. 在设置页面点击"导出全部数据"
2. 选择Excel或CSV格式
3. 保存到指定位置

**导入数据**：
1. 在设置页面点击"导入数据"
2. 选择Excel文件（.xlsx）
3. 系统自动导入并跳过重复数据

---

## 七、常见问题

### 7.1 应用无法启动

**问题**：双击JAR文件无响应或报错"缺少JavaFX运行时组件"

**解决方案**：
1. 使用 `run.bat` 脚本运行
2. 或使用Windows安装程序版本
3. 或使用 `mvn javafx:run` 命令

### 7.2 中文乱码

**问题**：界面或数据显示中文乱码

**解决方案**：
1. 确保系统编码为UTF-8
2. 运行时添加JVM参数：`-Dfile.encoding=UTF-8`
3. 已在pom.xml和run.bat中配置

### 7.3 Excel导入失败

**问题**：导入Excel文件时报错

**解决方案**：
1. 检查Excel格式是否为.xlsx（不支持.xls）
2. 检查数据格式是否符合模板要求
3. 查看错误详情，根据提示修改数据

---

## 八、打包清单

### 8.1 交付文件

完整的部署包应包含以下文件：

```
PetitionersSystem-Deploy/
├── PetitionersSystem-1.0.0.msi          # Windows安装程序
├── petitioners-system-1.0.0-shaded.jar  # 可执行JAR（备用）
├── run.bat                              # 启动脚本（备用）
├── README.md                            # 使用说明
├── 部署说明.md                          # 本文档
├── docs/                                # 文档目录
│   ├── 功能测试报告.md
│   ├── 系统设计文档.md
│   └── 自定义组件说明.md
└── sample-data/                         # 示例数据（可选）
    └── sample-petitioners.xlsx
```

### 8.2 安装包信息

- **安装包名称**：PetitionersSystem-1.0.0.msi
- **安装包大小**：约60-80MB（含JRE）
- **默认安装路径**：`C:\Program Files\PetitionersSystem\`
- **开始菜单快捷方式**：是
- **桌面快捷方式**：可选

---

## 九、版本更新说明

### 9.1 版本号规范

遵循语义化版本控制（Semantic Versioning）：

- **主版本号**（Major）：不兼容的API变更
- **次版本号**（Minor）：向后兼容的功能新增
- **修订号**（Patch）：向后兼容的问题修正

### 9.2 当前版本

**v1.0.0** (2025-11-24)
- ✅ 完整的CRUD功能
- ✅ 高级搜索与筛选
- ✅ 统计图表（10个图表）
- ✅ Excel导入导出
- ✅ 数据备份恢复
- ✅ 深蓝色暗色主题
- ✅ 自定义UI组件

---

## 十、技术支持

**开发团队**：济南市公安局历下分局刑侦大队
**联系方式**：[待填写]
**技术文档**：见 `docs/` 目录

---

*文档版本：v1.0*
*最后更新：2025年11月24日*
