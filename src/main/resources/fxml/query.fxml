<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx/17"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.petition.controller.QueryController"
      spacing="10.0" styleClass="page-container">
    <padding>
        <Insets top="20.0" right="30.0" bottom="30.0" left="30.0"/>
    </padding>

    <!-- 页面标题区域 -->
    <HBox alignment="CENTER_LEFT" spacing="15.0">
        <Label text="高级查询" styleClass="page-title"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Label fx:id="resultCountLabel" text="共 0 条结果" styleClass="result-count"/>
    </HBox>

    <!-- 查询条件卡片 -->
    <VBox spacing="8.0" styleClass="search-bar">
        <padding>
            <Insets top="12.0" right="18.0" bottom="12.0" left="18.0"/>
        </padding>

        <!-- 查询字段 -->
        <VBox spacing="8.0">
            <GridPane hgap="12.0" vgap="8.0">
                <columnConstraints>
                    <ColumnConstraints hgrow="SOMETIMES" percentWidth="33.33"/>
                    <ColumnConstraints hgrow="SOMETIMES" percentWidth="33.33"/>
                    <ColumnConstraints hgrow="SOMETIMES" percentWidth="33.33"/>
                </columnConstraints>

                <!-- 第一行 -->
                <VBox spacing="3.0" GridPane.columnIndex="0" GridPane.rowIndex="0">
                    <Label text="姓名" styleClass="query-label"/>
                    <TextField fx:id="nameField" promptText="请输入姓名" styleClass="text-field"/>
                </VBox>

                <VBox spacing="3.0" GridPane.columnIndex="1" GridPane.rowIndex="0">
                    <Label text="身份证号" styleClass="query-label"/>
                    <TextField fx:id="idCardField" promptText="请输入身份证号" styleClass="text-field"/>
                </VBox>

                <VBox spacing="3.0" GridPane.columnIndex="2" GridPane.rowIndex="0">
                    <Label text="籍贯" styleClass="query-label"/>
                    <TextField fx:id="nativePlaceField" promptText="请输入籍贯" styleClass="text-field"/>
                </VBox>

                <!-- 第二行 -->
                <VBox spacing="3.0" GridPane.columnIndex="0" GridPane.rowIndex="1">
                    <Label text="性别" styleClass="query-label"/>
                    <ComboBox fx:id="genderCombo" maxWidth="Infinity" styleClass="combo-box"/>
                </VBox>

                <VBox spacing="3.0" GridPane.columnIndex="1" GridPane.rowIndex="1">
                    <Label text="文化程度" styleClass="query-label"/>
                    <ComboBox fx:id="educationCombo" maxWidth="Infinity" styleClass="combo-box"/>
                </VBox>

                <VBox spacing="3.0" GridPane.columnIndex="2" GridPane.rowIndex="1">
                    <Label text="婚姻状况" styleClass="query-label"/>
                    <ComboBox fx:id="maritalStatusCombo" maxWidth="Infinity" styleClass="combo-box"/>
                </VBox>

                <!-- 第三行 -->
                <VBox spacing="3.0" GridPane.columnIndex="0" GridPane.rowIndex="2">
                    <Label text="危险等级" styleClass="query-label"/>
                    <ComboBox fx:id="riskLevelCombo" maxWidth="Infinity" styleClass="combo-box"/>
                </VBox>

                <VBox spacing="3.0" GridPane.columnIndex="1" GridPane.rowIndex="2">
                    <Label text="进京方式" styleClass="query-label"/>
                    <ComboBox fx:id="entryMethodCombo" maxWidth="Infinity" styleClass="combo-box"/>
                </VBox>

                <VBox spacing="3.0" GridPane.columnIndex="2" GridPane.rowIndex="2">
                    <HBox alignment="BOTTOM_LEFT" spacing="6.0">
                        <VBox spacing="3.0" HBox.hgrow="ALWAYS">
                            <Label text="上访次数范围" styleClass="query-label"/>
                            <HBox spacing="5.0" alignment="CENTER_LEFT">
                                <Spinner fx:id="minVisitSpinner" prefWidth="65" maxWidth="65" styleClass="spinner"/>
                                <Label text="-" styleClass="query-label"/>
                                <Spinner fx:id="maxVisitSpinner" prefWidth="65" maxWidth="65" styleClass="spinner"/>
                                <Label text="次" styleClass="query-label"/>
                            </HBox>
                        </VBox>
                    </HBox>
                </VBox>
            </GridPane>
        </VBox>

        <!-- 操作按钮区域 -->
        <HBox spacing="10.0" alignment="CENTER_RIGHT">
            <Button fx:id="resetButton" text="重置条件" styleClass="secondary-button" onAction="#handleReset"
                    style="-fx-min-width: 95px; -fx-padding: 7 18;"/>
            <Button fx:id="searchButton" text="开始查询" styleClass="primary-button" onAction="#handleSearch"
                    style="-fx-min-width: 95px; -fx-padding: 7 18;"/>
            <Button fx:id="exportButton" text="导出结果" styleClass="success-button" onAction="#handleExport"
                    style="-fx-min-width: 95px; -fx-padding: 7 18;"/>
        </HBox>
    </VBox>

    <!-- 查询结果区域 -->
    <VBox VBox.vgrow="ALWAYS" spacing="8.0">
        <!-- 结果表格 -->
        <TableView fx:id="resultTable" VBox.vgrow="ALWAYS" styleClass="table-view">
            <columns>
                <TableColumn fx:id="indexColumn" text="序号" prefWidth="60" sortable="false"/>
                <TableColumn fx:id="nameColumn" text="姓名" prefWidth="100"/>
                <TableColumn fx:id="idCardColumn" text="身份证号" prefWidth="180"/>
                <TableColumn fx:id="genderColumn" text="性别" prefWidth="60"/>
                <TableColumn fx:id="nativePlaceColumn" text="籍贯" prefWidth="100"/>
                <TableColumn fx:id="visitCountColumn" text="上访次数" prefWidth="90"/>
                <TableColumn fx:id="riskLevelColumn" text="危险等级" prefWidth="100"/>
                <TableColumn fx:id="phoneColumn" text="联系电话" prefWidth="130"/>
                <TableColumn fx:id="actionColumn" text="操作" prefWidth="150" sortable="false"/>
            </columns>
            <placeholder>
                <VBox alignment="CENTER" spacing="10.0">
                    <Label text="暂无查询结果" styleClass="page-subtitle" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
                    <Label text="请设置查询条件后点击 开始查询 按钮" styleClass="info-label"/>
                </VBox>
            </placeholder>
            <columnResizePolicy>
                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
            </columnResizePolicy>
        </TableView>
    </VBox>
</VBox>
